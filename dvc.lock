schema: '2.0'
stages:
  prepare:
    cmd: python src/data/prepare.py --config configs/config.yaml
    deps:
    - path: configs/config.yaml
      hash: md5
      md5: d67a3c8bbd1b242aa3ded740c3c71083
      size: 678
    - path: data
      hash: md5
      md5: 18d3ba9f82aa57f2f5267753f1659e05.dir
      size: 85828693
      nfiles: 8
    - path: src/data/dataset.py
      hash: md5
      md5: ff153abc94ce62541777ca9ff477c62a
      size: 5427
    - path: src/data/prepare.py
      hash: md5
      md5: 75b109f1be67234333dcfd31565d5f5a
      size: 2032
    - path: src/data/validation.py
      hash: md5
      md5: e0a013ea7e94dbc06cadf82a3ff02368
      size: 5930
    outs:
    - path: metrics/data_info.yaml
      hash: md5
      md5: 983a74ffdd12733f22606218161762f3
      size: 82

  train:
    cmd: python src/training/train.py --config configs/config.yaml
    deps:
    - path: configs/config.yaml
      hash: md5
      md5: d67a3c8bbd1b242aa3ded740c3c71083
      size: 678
    - path: configs/model_config.yaml
      hash: md5
      md5: e4030ec84706088e4c478eef1c8adba4
      size: 313
    - path: data
      hash: md5
      md5: 18d3ba9f82aa57f2f5267753f1659e05.dir
      size: 85828693
      nfiles: 8
    - path: metrics/data_info.yaml
      hash: md5
      md5: 983a74ffdd12733f22606218161762f3
      size: 82
    - path: src/data/dataset.py
      hash: md5
      md5: ff153abc94ce62541777ca9ff477c62a
      size: 5427
    - path: src/models/cnn_model.py
      hash: md5
      md5: b8d3e94a884967d2ed00497338636fb3
      size: 3240
    - path: src/training/metrics.py
      hash: md5
      md5: c200e33883e726958dfed833dc408a4d
      size: 2228
    - path: src/training/train.py
      hash: md5
      md5: 9639bc77cb2541b6ae5f9b932e7adb02
      size: 13749
    - path: src/training/utils.py
      hash: md5
      md5: 83e2f563a2edf8068d897729c9d08ba9
      size: 2967
    params:
      configs/config.yaml:
        model.dropout: 0.5
        model.hidden_dims:
        - 128
        - 64
        model.num_classes: 10
        training.learning_rate: 0.001
        training.num_epochs: 10
        training.optimizer: Adam
        training.random_seed: 42
    outs:
    - path: models/best_model
      hash: md5
      md5: 614261333f032ffec3726171f88fd0ae.dir
      size: 1002488
      nfiles: 2
    - path: models/final_model
      hash: md5
      md5: 614261333f032ffec3726171f88fd0ae.dir
      size: 1002488
      nfiles: 2
  evaluate:
    cmd: python src/training/evaluate.py --config configs/config.yaml 
      --model-path models/best_model
    deps:
    - path: configs/config.yaml
      hash: md5
      md5: d67a3c8bbd1b242aa3ded740c3c71083
      size: 678
    - path: data
      hash: md5
      md5: 18d3ba9f82aa57f2f5267753f1659e05.dir
      size: 85828693
      nfiles: 8
    - path: models/best_model
      hash: md5
      md5: 614261333f032ffec3726171f88fd0ae.dir
      size: 1002488
      nfiles: 2
    - path: src/data/dataset.py
      hash: md5
      md5: ff153abc94ce62541777ca9ff477c62a
      size: 5427
    - path: src/models/cnn_model.py
      hash: md5
      md5: b8d3e94a884967d2ed00497338636fb3
      size: 3240
    - path: src/training/evaluate.py
      hash: md5
      md5: 0e6f8464c44a6ae9d2709019f0b930eb
      size: 4833
    - path: src/training/metrics.py
      hash: md5
      md5: c200e33883e726958dfed833dc408a4d
      size: 2228
    outs:
    - path: metrics/test_metrics.json
      hash: md5
      md5: e380724a6158f19cc6e84743c7c87893
      size: 155
    - path: metrics/test_metrics.yaml
      hash: md5
      md5: 58cee6195cc707531e95ca684ec7ea45
      size: 128
